<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover">
    <meta name="description" content="Ministry of Groove: Decrypting the Culture. Synchronizing the Grid.">
    <title>M.O.G. | NATIONAL AMAPIANO GRID V55.0.0</title>
    
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        @import url('https://api.fontshare.com/v2/css?f[]=clash-display@700&f[]=satoshi@400,900&display=swap');
        :root { --mog-gold: #D4AF37; --mog-blue: #00d4ff; --mog-bg: #060a0f; --mog-panel: rgba(10, 20, 30, 0.95); --wa-bg: #0b141a; }
        
        * { transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1); font-family: 'Satoshi', sans-serif; -webkit-tap-highlight-color: transparent; }
        h1, .tile-title { font-family: 'Clash Display', sans-serif; }
        .brand-title { font-size: clamp(1.5rem, 8vw, 3rem); line-height: 1.1; }

        /* MOTHERBOARD CIRCUIT PATTERN BACKGROUND */
        body { 
            background-color: var(--mog-bg); 
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(0, 212, 255, 0.1) 0%, transparent 85%),
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 10 L30 10 L30 30 M70 10 L90 10 L90 30 M10 90 L10 70 L30 70 M90 90 L90 70 L70 70 M30 30 L50 30 L50 50 L70 50 L70 70' stroke='%2300d4ff' stroke-width='0.5' fill='none' opacity='0.2'/%3E%3Ccircle cx='30' cy='30' r='1' fill='%2300d4ff' opacity='0.4'/%3E%3Ccircle cx='70' cy='70' r='1' fill='%2300d4ff' opacity='0.4'/%3E%3Ccircle cx='50' cy='50' r='1' fill='%2300d4ff' opacity='0.4'/%3E%3C/svg%3E");
            background-attachment: fixed;
            color: var(--mog-gold); margin: 0; overflow-x: hidden;
        }

        #ticker-wrap { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 1px solid var(--mog-gold); z-index: 1000; height: 35px; display: flex; align-items: center; overflow: hidden; -webkit-mask-image: linear-gradient(to right, black 75%, transparent 100%); mask-image: linear-gradient(to right, black 75%, transparent 100%); }
        .ticker-move { display: inline-block; white-space: nowrap; animation: ticker 45s linear infinite; font-size: 9px; font-weight: 900; letter-spacing: 2.5px; color: var(--mog-gold); text-transform: uppercase; }
        @keyframes ticker { 0% { transform: translate3d(0, 0, 0); } 100% { transform: translate3d(-100%, 0, 0); } }

        #app-content { margin-top: 80px; padding: 20px; }
        .command-tile { background: var(--mog-panel); border: 1px solid rgba(0, 212, 255, 0.3); backdrop-filter: blur(40px); border-radius: 28px; overflow: hidden; position: relative; box-shadow: 0 15px 50px rgba(0, 0, 0, 0.8); }
        .tile-header { border-bottom: 1px solid rgba(0, 212, 255, 0.2); padding: 18px 24px; background: linear-gradient(90deg, rgba(0, 212, 255, 0.1) 0%, transparent 100%); }
        .tile-title { letter-spacing: 4px; text-transform: uppercase; font-size: 10px; color: var(--mog-blue); font-weight: 700; }

        /* SOVEREIGN CURSOR SCROLLER UPGRADE */
        .scroller-v { overflow-y: auto; scrollbar-width: thin; scrollbar-color: var(--mog-blue) transparent; scroll-behavior: smooth; }
        .scroller-v::-webkit-scrollbar { width: 8px; }
        .scroller-v::-webkit-scrollbar-track { background: rgba(0,0,0,0.3); border-radius: 10px; }
        .scroller-v::-webkit-scrollbar-thumb { background: linear-gradient(var(--mog-blue), #005c4b); border-radius: 10px; border: 2px solid var(--mog-bg); }
        .scroller-v::-webkit-scrollbar-thumb:hover { background: var(--mog-gold); }

        /* SOCIAL-TECH SIDE MENU UPGRADE */
        #side-menu { position: fixed; top: 0; left: -320px; width: 320px; height: 100%; background: #080c10; border-right: 1px solid rgba(0,212,255,0.2); z-index: 2000; padding: 0; transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1); box-shadow: 25px 0 50px rgba(0,0,0,0.95); }
        #side-menu.active { transform: translateX(320px); }
        .menu-header { background: linear-gradient(to bottom, #111, #080c10); padding: 40px 25px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .menu-item { display: flex; align-items: center; gap: 15px; padding: 18px 25px; color: #aebbc9; font-size: 14px; font-weight: 500; border-radius: 12px; margin: 4px 10px; cursor: pointer; }
        .menu-item:hover { background: rgba(0,212,255,0.08); color: var(--mog-blue); }
        .menu-item i { font-size: 18px; width: 24px; text-align: center; }

        .director-only { display: none; }
        .director-active .director-only { display: block; animation: fadeIn 0.5s ease; }

        .wa-bubble { position: relative; max-width: 85%; padding: 10px 14px; border-radius: 12px; margin-bottom: 8px; font-size: 13px; color: #e9edef; line-height: 1.4; box-shadow: 0 1px 1px rgba(0,0,0,0.2); }
        .wa-in { background: #202c33; align-self: flex-start; border-bottom-left-radius: 2px; }
        .wa-out { background: #005c4b; align-self: flex-end; border-bottom-right-radius: 2px; }

        /* TOGGLE UI */
        .toggle-row { display: flex; align-items: center; justify-content: space-between; padding: 15px 25px; margin: 0 10px; background: rgba(255,255,255,0.03); border-radius: 12px; }
        .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: #666; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #00a884; }
        input:checked + .slider:before { transform: translateX(20px); background-color: white; }
    </style>
</head>
<body class="scrollbar-hide" id="main-body">

    <button onclick="toggleMenu()" class="fixed top-10 left-6 z-[2500] bg-black/40 backdrop-blur-md w-12 h-12 rounded-full border border-white/10 flex items-center justify-center text-blue-400 text-xl shadow-xl hover:text-gold transition-all active:scale-90">
        <i class="fa-solid fa-bars-staggered"></i>
    </button>
    
    <nav id="side-menu">
        <div class="menu-header">
            <div class="flex items-center gap-4 mb-2">
                <img src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png" class="h-12 w-12 border border-blue-500/30 rounded-full">
                <div>
                    <p class="text-white font-black text-sm uppercase tracking-widest">M.O.G. Sovereign</p>
                    <p class="text-[9px] text-zinc-500 uppercase font-bold tracking-tighter">V55.0.0 Neural Protocol</p>
                </div>
            </div>
        </div>

        <div class="scroller-v h-[calc(100%-150px)] pt-4">
            <div class="toggle-row mb-4">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-bell-slash text-zinc-500"></i>
                    <span class="text-zinc-300 uppercase text-[10px] font-black">Silent Mode</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="silent-toggle">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="menu-item"><i class="fa-solid fa-folder-open"></i><span>Intel Folders</span></div>
            <div class="menu-item"><i class="fa-solid fa-box-archive"></i><span>RSA Archive</span></div>
            <div class="menu-item"><i class="fa-solid fa-user-shield"></i><span>Security Directives</span></div>
            <div class="menu-item"><i class="fa-solid fa-address-book"></i><span>Sector Contacts</span></div>
            <div class="menu-item"><i class="fa-solid fa-circle-info"></i><span>Terms of Service</span></div>
            <div class="menu-item text-red-500/70" onclick="toggleMenu()"><i class="fa-solid fa-xmark"></i><span>Close Interface</span></div>
        </div>
    </nav>

    <div id="ticker-wrap"><div class="ticker-move">SOCIAL_TECH_V55 // SOVEREIGN_SCROLLER_UPGRADE // MOTHERBOARD_ACTIVE // SPOTIFY_SYNC // DIRECTOR_ONLINE...</div></div>

    <div id="app-content" class="opacity-1 transition-opacity duration-1000">
        <header class="flex flex-col lg:flex-row justify-between items-center gap-10 relative z-50 mb-10 pl-16 lg:pl-0">
            <div class="flex items-center gap-8 w-full">
                <img src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png" class="h-[82px] w-[82px] border-2 border-blue-500/50 rounded-full shadow-2xl">
                <div class="w-full">
                    <h1 class="brand-title text-[#D4AF37] tracking-[.25em] uppercase font-black">Ministry of Groove</h1>
                    <p class="text-[10px] text-blue-400 tracking-[.6em] mt-3 uppercase font-black">Decrypting the Culture. Synchronizing the Grid.</p>
                </div>
            </div>
            <div class="flex flex-col items-end text-right">
                <div class="text-[12px] text-zinc-500 font-black border border-white/10 px-8 py-3 bg-white/5 tracking-[.6em] rounded-full italic opacity-50">GRID_SECURE</div>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-12 gap-10 relative z-50">
            
            <div class="lg:col-span-4 space-y-10">
                <section class="command-tile p-8">
                    <div id="auth-ui" class="space-y-4">
                        <div class="text-center font-black text-blue-400 text-[10px] uppercase">Auth Access</div>
                        <input id="email-in" type="email" placeholder="ACCESS EMAIL" class="w-full bg-black/40 border border-blue-500/20 rounded-xl p-4 text-white text-[10px] outline-none focus:border-blue-500/60">
                        <input id="pass-in" type="password" placeholder="DIRECTOR CODE" class="w-full bg-black/40 border border-gold/20 rounded-xl p-4 text-gold text-[10px] outline-none hidden">
                        <div class="grid grid-cols-2 gap-4"><button onclick="handleAuth()" class="border border-blue-400/30 bg-blue-500/5 p-3 rounded-xl text-[10px] font-bold hover:bg-blue-500/10 transition-colors">Login</button><button onclick="handleAuth()" class="border border-gold/30 bg-gold/5 p-3 rounded-xl text-[10px] font-bold hover:bg-gold/10 transition-colors">Signup</button></div>
                    </div>
                </section>

                <section class="command-tile border-blue-500/40">
                    <div class="tile-header flex justify-between"><span class="tile-title text-blue-500">RSA Territorial Radar</span><i class="fa-solid fa-satellite-dish animate-pulse"></i></div>
                    <div class="h-64 relative overflow-hidden"><iframe class="w-full h-full grayscale invert opacity-50 contrast-150 border-none scale-110" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14348.66779083556!2d29.2014842!3d-25.872715!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1e9d123456789abc%3A0x1234567890abcdef!2seMalahleni!5e0!3m2!1sen!2sza!4v1620000000000!5m2!1sen!2sza6"></iframe></div>
                </section>

                <section class="command-tile h-[350px] flex flex-col">
                    <div class="tile-header flex justify-between"><span class="tile-title text-gold">Sovereign MP3 Archive</span><i class="fa-solid fa-compact-disc"></i></div>
                    <div class="flex-grow p-4 scroller-v space-y-3" id="archive-grid">
                        <div class="p-3 bg-white/5 rounded-xl flex items-center gap-4 hover:bg-white/10 transition-all border border-white/5">
                            <span class="text-[9px] font-black text-white uppercase italic truncate">MOG_Handshake_V1.mp3</span>
                            <audio src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/music.mp3" controls class="flex-grow h-6"></audio>
                        </div>
                    </div>
                </section>
            </div>

            <div class="lg:col-span-8 space-y-10">
                <section class="command-tile border-blue-500/20">
                    <div class="tile-header flex justify-between px-6 py-5"><span class="tile-title text-blue-400 font-black tracking-widest">Visual Intel Archive</span><i class="fa-solid fa-shield-halved text-blue-400"></i></div>
                    <div id="gallery-grid" class="grid grid-cols-2 md:grid-cols-3 gap-6 p-6 max-h-[520px] scroller-v">
                        <div class="gallery-node h-48 bg-zinc-900/40 rounded-2xl flex items-center justify-center border border-dashed border-white/10"><i class="fa-solid fa-fingerprint text-white/5 text-4xl"></i></div>
                    </div>
                </section>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <section class="command-tile h-[650px] flex flex-col">
                        <div class="tile-header flex justify-between items-center"><span class="tile-title">Frequency Grid (Spotify)</span><i class="fa-brands fa-spotify text-2xl text-[#1DB954]"></i></div>
                        <div class="flex-grow scroller-v p-4">
                            <iframe style="border-radius:18px" src="https://open.spotify.com/embed/playlist/37i9dQZEVXbO789QXCHY7F?utm_source=generator&theme=0" width="100%" height="900" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                        </div>
                    </section>

                    <section class="command-tile h-[650px] flex flex-col" style="background: var(--wa-bg);">
                        <div class="tile-header bg-[#202c33] flex justify-between py-3 px-4 shadow-md"><span class="tile-title text-white font-black">Frequency Chat</span><i class="fa-solid fa-lock text-[10px] text-zinc-500"></i></div>
                        <div id="chat-stream" class="flex-grow p-4 scroller-v flex flex-col" style="background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png'); background-blend-mode: overlay;"></div>
                        <div class="p-3 bg-[#202c33] flex items-center gap-3">
                            <input type="text" id="chat-msg-in" placeholder="Type a message" class="flex-grow bg-[#2a3942] rounded-lg p-3 text-white text-sm outline-none border border-transparent focus:border-emerald-500/30">
                            <button onclick="sendPacket()" class="bg-[#00a884] text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg active:scale-90 transition-all"><i class="fa-solid fa-paper-plane"></i></button>
                        </div>
                    </section>
                </div>
            </div>
        </main>
                        </div>
           <section id="director-dashboard" class="hidden fixed inset-0 z-[3000] bg-black/98 p-10 overflow-y-auto scroller-v">
        <div class="flex justify-between items-center mb-12 border-b border-gold/30 pb-4"><h2 class="text-3xl text-white font-black uppercase">Director Command</h2><button onclick="toggleDirectorUI()" class="text-white text-2xl"><i class="fa-solid fa-xmark"></i></button></div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
            <div class="command-tile p-6 border-gold/40"><span class="text-[9px] text-gold uppercase font-black tracking-widest">Liquid Assets</span><p class="text-2xl text-white font-black mt-2">R73,827.00</p></div>
            <div class="command-tile p-6 border-gold/40"><span class="text-[9px] text-gold uppercase font-black tracking-widest">RSA Bond Yield</span><p class="text-2xl text-white font-black mt-2">R13,827.19</p></div>
            <div class="command-tile p-6 border-gold/40"><span class="text-[9px] text-gold uppercase font-black tracking-widest">Network Growth</span><p class="text-2xl text-white font-black mt-2">+14.2% Peak</p></div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
            <div class="command-tile p-8 space-y-4"><h3 class="tile-title text-gold">Intel Upload</h3><input type="file" id="file-upload" onchange="uploadIntel(this)" class="text-[10px] text-zinc-500"></div>
            <div class="command-tile p-8 space-y-4"><h3 class="tile-title text-gold">Broadcast</h3><textarea id="bulletin-msg" class="w-full h-24 bg-black/40 border border-gold/20 p-3 text-gold text-xs outline-none rounded-xl" placeholder="DIRECTIVE TRANSMISSION..."></textarea><button onclick="broadcastBulletin()" class="w-full bg-gold/10 border border-gold p-3 rounded-xl text-gold uppercase text-[10px] font-black hover:bg-gold hover:text-black">Execute Broadcast</button></div>
        </div>
    </section>

    <button id="admin-trigger" class="hidden fixed bottom-12 right-12 z-[2500] bg-gold text-black w-16 h-16 rounded-full flex items-center justify-center animate-bounce shadow-2xl" onclick="toggleDirectorUI()"><i class="fa-solid fa-crown text-xl"></i></button>

    <script>
        const CFG = { U: "https://vbkpatwvgvwarybbpiky.supabase.co", K: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZia3BhdHd2Z3Z3YXJpYmJwaWt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExMjc0MTksImV4cCI6MjA4NjcwMzQxOX0.v3iWw2z9vL-X6pGjY0W_S5m1z0S8uI1L8yN7fL0M_Y8" };
        const db = window.supabase.createClient(CFG.U, CFG.K);
        let currentUser = null;
        let lastArchiveCount = 0;
        const notifySound = new Audio("https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/notification.mp3");

        function toggleMenu() { document.getElementById('side-menu').classList.toggle('active'); }
        function showDirectorLogin() { document.getElementById('pass-in').classList.toggle('hidden'); }
        function toggleDirectorUI() { document.getElementById('director-dashboard').classList.toggle('hidden'); }
        
        async function handleAuth() {
            const email = document.getElementById('email-in').value.toLowerCase();
            const pass = document.getElementById('pass-in').value;
            if (email === 'director.mog@gmail.com' && (pass === '7486' || pass === '@MOGProtocol2026')) {
                currentUser = { id: 'DIRECTOR', email };
                document.getElementById('main-body').classList.add('director-active');
                document.getElementById('auth-ui').classList.add('hidden');
                document.getElementById('admin-trigger').classList.remove('hidden');
                fetchGallery(); fetchArchive(); fetchMessages();
            }
        }

        async function fetchArchive() {
            const { data } = await db.storage.from('archive').list('public');
            if (data) {
                const isSilent = document.getElementById('silent-toggle').checked;
                if (lastArchiveCount > 0 && data.length > lastArchiveCount && !isSilent) {
                    notifySound.play().catch(() => {});
                }
                lastArchiveCount = data.length;
                const grid = document.getElementById('archive-grid');
                grid.innerHTML = data.map(f => {
                    const { data: { publicUrl } } = db.storage.from('archive').getPublicUrl(`public/${f.name}`);
                    return `<div class="p-4 bg-white/5 rounded-2xl flex items-center gap-4 border border-white/5 shadow-inner"><span class="text-[9px] font-black text-white uppercase italic truncate">${f.name}</span><audio src="${publicUrl}" controls class="flex-grow h-6 opacity-80 hover:opacity-100 transition-opacity"></audio></div>`;
                }).join('');
            }
        }

        async function fetchGallery() {
            const { data } = await db.storage.from('gallery').list('public', { limit: 50, sortBy: { column: 'name', order: 'desc' } });
            if (data) document.getElementById('gallery-grid').innerHTML = data.map(f => {
                const { data: { publicUrl } } = db.storage.from('gallery').getPublicUrl(`public/${f.name}`);
                return `<div class="gallery-node relative h-48 overflow-hidden rounded-2xl border border-white/10 group"><img src="${publicUrl}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-all group-hover:scale-105"><div class="absolute bottom-3 right-3"><a href="${publicUrl}" download class="bg-blue-500/20 backdrop-blur-md p-2 rounded-full border border-blue-400 text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity shadow-lg"><i class="fa-solid fa-download text-[10px]"></i></a></div></div>`;
            }).join('');
        }

        async function fetchMessages() { const { data } = await db.from('messages').select('*').order('created_at', { ascending: true }); if (data) data.forEach(displayMessage); }
        function displayMessage(m) {
            const s = document.getElementById('chat-stream');
            const d = document.createElement('div');
            const isMe = m.alias === 'DIRECTOR_MOG';
            d.className = `wa-bubble ${isMe ? 'wa-out' : 'wa-in'}`;
            d.innerHTML = `<p class="font-black text-[10px] ${isMe ? 'text-zinc-200' : 'text-blue-400'} mb-1">${m.alias || 'OPERATIVE'}</p><p>${m.content}</p>`;
            s.appendChild(d); s.scrollTop = s.scrollHeight;
        }

        async function sendPacket() {
            const i = document.getElementById('chat-msg-in'); if(!i.value || !currentUser) return;
            const alias = currentUser.email === 'director.mog@gmail.com' ? 'DIRECTOR_MOG' : currentUser.email.split('@')[0];
            await db.from('messages').insert([{ content: i.value, user_id: currentUser.id, alias: alias }]); i.value = "";
        }

        function initRadar() { const c = document.getElementById('radar-canvas'); const ctx = c.getContext('2d'); let w = c.width = c.parentElement.offsetWidth, h = c.height = c.parentElement.offsetHeight; let r = 0; function draw() { ctx.clearRect(0,0,w,h); r += 1.8; if(r > w/2) r = 0; ctx.beginPath(); ctx.arc(w/2, h/2, r, 0, Math.PI*2); ctx.strokeStyle = `rgba(0, 212, 255, ${1 - r/(w/2)})`; ctx.lineWidth = 2; ctx.stroke(); requestAnimationFrame(draw); } draw(); }
        window.addEventListener('load', () => { initRadar(); fetchGallery(); fetchArchive(); setInterval(fetchArchive, 10000); });
    </script>
</body>
</html>             
