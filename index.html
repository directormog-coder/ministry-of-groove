<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover">
    <title>M.O.G. | NATIONAL AMAPIANO GRID V57.0.0</title>
    
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        @import url('https://api.fontshare.com/v2/css?f[]=clash-display@700&f[]=satoshi@400,900&display=swap');
        :root { --mog-gold: #D4AF37; --mog-blue: #00d4ff; --mog-bg: #060a0f; --mog-panel: rgba(10, 20, 30, 0.95); }
        
        * { transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1); font-family: 'Satoshi', sans-serif; -webkit-tap-highlight-color: transparent; }
        h1, .tile-title { font-family: 'Clash Display', sans-serif; }
        .brand-title { font-size: clamp(1.5rem, 8vw, 3rem); line-height: 1.1; }

        /* MOTHERBOARD BACKGROUND */
        body { 
            background-color: var(--mog-bg); 
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(0, 212, 255, 0.1) 0%, transparent 85%),
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 10 L30 10 L30 30 M70 10 L90 10 L90 30 M10 90 L10 70 L30 70 M90 90 L90 70 L70 70 M30 30 L50 30 L50 50 L70 50 L70 70' stroke='%2300d4ff' stroke-width='0.5' fill='none' opacity='0.2'/%3E%3C/svg%3E");
            background-attachment: fixed;
            color: var(--mog-gold); margin: 0; overflow-x: hidden;
        }

        #ticker-wrap { position: fixed; top: 0; width: 100%; background: #000; border-bottom: 1px solid var(--mog-gold); z-index: 1000; height: 35px; display: flex; align-items: center; overflow: hidden; -webkit-mask-image: linear-gradient(to right, black 75%, transparent 100%); mask-image: linear-gradient(to right, black 75%, transparent 100%); }
        .ticker-move { display: inline-block; white-space: nowrap; animation: ticker 45s linear infinite; font-size: 9px; font-weight: 900; letter-spacing: 2.5px; color: var(--mog-gold); text-transform: uppercase; }
        @keyframes ticker { 0% { transform: translate3d(0, 0, 0); } 100% { transform: translate3d(-100%, 0, 0); } }

        /* UNIQUE M.O.G. CHAT BUBBLES */
        .mog-chat-row { display: flex; gap: 12px; margin-bottom: 20px; align-items: flex-end; }
        .mog-chat-logo { width: 24px; height: 24px; border-radius: 50%; border: 1px solid var(--mog-blue); flex-shrink: 0; background: #000; padding: 2px; }
        .mog-bubble { padding: 12px 18px; border-radius: 20px; font-size: 13px; color: #fff; position: relative; border: 1px solid rgba(0, 212, 255, 0.2); backdrop-filter: blur(10px); }
        .mog-in { background: rgba(0, 212, 255, 0.05); border-bottom-left-radius: 4px; }
        .mog-out { background: rgba(212, 175, 55, 0.1); border-color: rgba(212, 175, 55, 0.3); border-bottom-right-radius: 4px; flex-direction: row-reverse; }

        /* TECH-STANDARD AUTH */
        .auth-input { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 16px; width: 100%; color: white; outline: none; font-size: 14px; }
        .auth-input:focus { border-color: var(--mog-blue); box-shadow: 0 0 15px rgba(0, 212, 255, 0.2); }
        .auth-btn { background: white; color: black; font-weight: 900; border-radius: 30px; padding: 14px; width: 100%; font-size: 14px; transition: 0.2s; }
        .auth-btn:hover { opacity: 0.9; transform: scale(0.98); }

        #app-content { margin-top: 80px; padding: 20px; }
        .command-tile { background: var(--mog-panel); border: 1px solid rgba(0, 212, 255, 0.3); backdrop-filter: blur(40px); border-radius: 28px; overflow: hidden; position: relative; }
        .scroller-v { overflow-y: auto; scrollbar-width: thin; scrollbar-color: var(--mog-blue) transparent; }
        .scroller-v::-webkit-scrollbar { width: 6px; }
        .scroller-v::-webkit-scrollbar-thumb { background: var(--mog-blue); border-radius: 10px; }

        .director-only { display: none; }
        .director-active .director-only { display: block; }
    </style>
</head>
<body class="scrollbar-hide" id="main-body">

    <button onclick="toggleMenu()" class="fixed top-10 left-6 z-[2500] text-blue-400 text-2xl"><i class="fa-solid fa-bars-staggered"></i></button>
    
    <nav id="side-menu" class="fixed top-0 left-[-320px] w-[320px] h-full bg-[#080c10] border-right border-white/5 p-8 z-[3000] transition-all">
        <div class="mb-10 flex items-center gap-4"><img src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png" class="h-12 w-12"><span class="text-gold font-black text-xs uppercase italic">Folders</span></div>
        <div class="space-y-4">
            <a class="block p-4 text-white uppercase text-[11px] border-b border-white/5">Grid Architecture</a>
            <a class="block p-4 text-white uppercase text-[11px] border-b border-white/5">Privacy Protocol</a>
            <div class="flex justify-between items-center p-4"><span class="text-[10px] text-zinc-500 uppercase font-black">Silent Mode</span><input type="checkbox" id="silent-toggle"></div>
        </div>
    </nav>

    <div id="ticker-wrap"><div class="ticker-move">MASTER_BUILD_V57 // STEALTH_DIRECTOR_HANDSHAKE_LIVE // MOG_BUBBLE_SYNC // TECH_AUTH_ACTIVE...</div></div>

    <div id="app-content" class="opacity-1">
        <header class="flex flex-col lg:flex-row justify-between items-center gap-10 relative z-50 mb-10 pl-16 lg:pl-0">
            <div class="flex items-center gap-8 w-full">
                <img src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png" 
                     id="mog-master-logo" 
                     onclick="handleLogoSequence()" 
                     class="h-[82px] w-[82px] border-2 border-blue-500/50 rounded-full shadow-2xl cursor-pointer active:scale-95">
                <div class="w-full">
                    <h1 class="brand-title text-[#D4AF37] tracking-[.25em] uppercase font-black">Ministry of Groove</h1>
                    <div class="flex items-center gap-4 mt-2">
                        <p class="text-[10px] text-blue-400 tracking-[.6em] uppercase font-black">Decrypting the Culture. Synchronizing the Grid.</p>
                        <div class="flex items-center gap-2 bg-black/40 px-3 py-1 rounded-full border border-white/5">
                            <span id="lat-dot" class="w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_#22c55e]"></span>
                            <span id="lat-val" class="text-[9px] text-zinc-500 font-black uppercase">LATENCY: 24ms</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-12 gap-10 relative z-50">
            
            <div class="lg:col-span-4 space-y-10">
                <section class="command-tile p-10 bg-[#000]">
                    <div id="auth-ui" class="space-y-6">
                        <div class="text-center mb-8">
                            <h2 class="text-xl text-white font-black tracking-widest uppercase">Operative Sign In</h2>
                            <p class="text-[10px] text-zinc-500 mt-2">Enter your frequency credentials</p>
                        </div>
                        <input id="email-in" type="email" placeholder="Email" class="auth-input">
                        <input id="pass-in" type="password" placeholder="Password" class="auth-input">
                        
                        <div class="space-y-3 pt-4">
                            <button onclick="handleAuth()" class="auth-btn">Continue</button>
                            <button class="w-full bg-transparent border border-zinc-800 text-white rounded-full p-3 text-[12px] font-bold flex items-center justify-center gap-3">
                                <i class="fa-brands fa-google text-blue-400"></i> Continue with Google
                            </button>
                        </div>
                        <p class="text-[10px] text-center text-zinc-600 mt-6">Don't have an account? <span class="text-blue-400 cursor-pointer">Sign up</span></p>
                    </div>
                    <div id="director-login-portal" class="hidden space-y-6 animate-pulse border-t border-gold/20 pt-8">
                        <div class="text-center"><span class="text-gold text-[10px] font-black uppercase tracking-[.5em]">Director Bypass</span></div>
                        <input id="dir-email" type="email" placeholder="DIRECTOR_ID" class="auth-input border-gold/30 text-gold">
                        <input id="dir-pass" type="password" placeholder="HANDSHAKE_CODE" class="auth-input border-gold/30 text-gold">
                        <button onclick="executeDirectorBypass()" class="w-full bg-gold text-black font-black p-4 rounded-xl text-xs uppercase">Unlock Totality</button>
                    </div>
                </section>

                <section class="command-tile border-blue-500/40">
                    <div class="tile-header flex justify-between"><span class="tile-title text-blue-500 uppercase">Territorial Radar</span><i class="fa-solid fa-satellite-dish animate-pulse"></i></div>
                    <div class="h-64"><iframe class="w-full h-full grayscale invert opacity-40 border-none" src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d7000000!2d24!3d-29!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sza!4v17100000000000"></iframe></div>
                </section>
            </div>

            <div class="lg:col-span-8 space-y-10">
                <section class="command-tile h-[650px] flex flex-col bg-[#050505]">
                    <div class="tile-header bg-black/60 flex items-center justify-between py-4 px-8 border-b border-white/5">
                        <div class="flex items-center gap-4">
                            <img src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png" class="h-8 w-8 border border-blue-500/30 rounded-full">
                            <span class="text-white font-black text-sm uppercase tracking-widest">Frequency Comms</span>
                        </div>
                        <i class="fa-solid fa-shield-halved text-emerald-500 text-xs"></i>
                    </div>
                    <div id="chat-stream" class="flex-grow p-8 scroller-v flex flex-col">
                        </div>
                    <div class="p-6 bg-black flex items-center gap-4">
                        <input type="text" id="chat-msg-in" placeholder="Transmit thought..." class="flex-grow bg-[#111] border border-white/5 rounded-full px-8 py-4 text-white text-sm outline-none focus:border-blue-500/40">
                        <button onclick="sendPacket()" class="bg-blue-500 text-white rounded-full w-14 h-14 flex items-center justify-center shadow-2xl active:scale-90"><i class="fa-solid fa-paper-plane"></i></button>
                    </div>
                </section>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <section class="command-tile h-[650px] flex flex-col">
                        <div class="tile-header flex justify-between items-center"><span class="tile-title text-[#1DB954]">Spotify Hitlist</span><i class="fa-brands fa-spotify text-2xl text-[#1DB954]"></i></div>
                        <div class="flex-grow scroller-v p-2">
                            <iframe src="https://open.spotify.com/embed/playlist/37i9dQZEVXbO789QXCHY7F?utm_source=generator&theme=0" width="100%" height="800" frameBorder="0" allow="autoplay; encrypted-media;"></iframe>
                        </div>
                    </section>
                    <section class="command-tile h-[350px] flex flex-col border-gold/20">
                        <div class="tile-header flex justify-between"><span class="tile-title text-gold uppercase italic">Archive MP3</span><i class="fa-solid fa-compact-disc"></i></div>
                        <div class="flex-grow p-4 scroller-v space-y-2" id="archive-grid"></div>
                    </section>
                </div>
            </div>
        </main>
    </div>
    
    <section id="director-dashboard" class="hidden fixed inset-0 z-[5000] bg-black p-10 overflow-y-auto scroller-v">
        <div class="flex justify-between items-center mb-12 border-b border-gold/30 pb-4"><h2 class="text-3xl text-white font-black uppercase">Director Command Totality</h2><button onclick="toggleDirectorUI()" class="text-white text-2xl"><i class="fa-solid fa-xmark"></i></button></div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
            <div class="command-tile p-6 border-gold/40 text-center"><span class="text-[10px] text-gold uppercase font-black">Liquid Assets</span><p class="text-3xl text-white font-black mt-2">R73,827.00</p></div>
            <div class="command-tile p-6 border-gold/40 text-center"><span class="text-[10px] text-gold uppercase font-black">Yield</span><p class="text-3xl text-white font-black mt-2">R13,827.19</p></div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
            <div class="command-tile p-8 space-y-4"><h3 class="tile-title text-gold italic">Archive Inject</h3><input type="file" onchange="uploadArchive(this)"></div>
            <div class="command-tile p-8 space-y-4 text-center"><p class="text-gold uppercase font-black text-xs">Authorized for Full Code Access</p></div>
        </div>
    </section>

    <script>
        const CFG = { U: "https://vbkpatwvgvwarybbpiky.supabase.co", K: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZia3BhdHd2Z3Z3YXJpYmJwaWt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExMjc0MTksImV4cCI6MjA4NjcwMzQxOX0.v3iWw2z9vL-X6pGjY0W_S5m1z0S8uI1L8yN7fL0M_Y8" };
        const db = window.supabase.createClient(CFG.U, CFG.K);
        let currentUser = null;
        let logoClicks = 0;

        function toggleMenu() { document.getElementById('side-menu').style.left = document.getElementById('side-menu').style.left === '0px' ? '-320px' : '0px'; }
        
        // STEALTH SEQUENCE
        function handleLogoSequence() {
            logoClicks++;
            if (logoClicks === 5) {
                document.getElementById('director-login-portal').classList.remove('hidden');
                logoClicks = 0;
            }
            setTimeout(() => { if(logoClicks > 0) logoClicks = 0; }, 3000);
        }

        async function executeDirectorBypass() {
            const email = document.getElementById('dir-email').value;
            const pass = document.getElementById('dir-pass').value;
            if (email === 'director.mog@gmail.com' && (pass === '7486' || pass === '@MOGProtocol2026')) {
                document.getElementById('main-body').classList.add('director-active');
                document.getElementById('director-dashboard').classList.remove('hidden');
                fetchMessages(); fetchArchive();
            }
        }

        function displayMessage(m) {
            const s = document.getElementById('chat-stream');
            const d = document.createElement('div');
            const isMe = m.alias === 'DIRECTOR_MOG';
            d.className = `mog-chat-row ${isMe ? 'mog-out' : ''}`;
            d.innerHTML = `
                <img src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png" class="mog-chat-logo">
                <div class="mog-bubble ${isMe ? 'mog-out' : 'mog-in'}">
                    <p class="text-[9px] font-black uppercase text-blue-400 mb-1">${m.alias || 'Operative'}</p>
                    <p>${m.content}</p>
                </div>
            `;
            s.appendChild(d); s.scrollTop = s.scrollHeight;
        }

        async function fetchMessages() { const { data } = await db.from('messages').select('*').order('created_at', { ascending: true }); if (data) data.forEach(displayMessage); }
        async function sendPacket() {
            const i = document.getElementById('chat-msg-in'); if(!i.value) return;
            const alias = currentUser?.email === 'director.mog@gmail.com' ? 'DIRECTOR_MOG' : 'Operative';
            await db.from('messages').insert([{ content: i.value, alias }]); i.value = "";
        }

        async function fetchArchive() {
            const { data } = await db.storage.from('archive').list('public');
            if (data) document.getElementById('archive-grid').innerHTML = data.map(f => {
                const { data: { publicUrl } } = db.storage.from('archive').getPublicUrl(`public/${f.name}`);
                return `<div class="p-3 bg-white/5 rounded-xl flex items-center gap-4"><span class="text-[9px] text-white uppercase italic truncate">${f.name}</span><audio src="${publicUrl}" controls class="h-6"></audio></div>`;
            }).join('');
        }

        window.addEventListener('load', () => { fetchMessages(); fetchArchive(); });
    </script>
</body>
</html>
