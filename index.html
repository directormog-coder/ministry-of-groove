<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover">
    <title>M.O.G. | SOVEREIGN TOTALITY V460</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        @import url('https://api.fontshare.com/v2/css?f[]=clash-display@700&f[]=satoshi@400,900&display=swap');
        
        :root { 
            --gold: #D4AF37; --blue: #007BFF; --bg: #050505; 
            --panel: rgba(10, 20, 30, 0.98); --glass: rgba(255, 255, 255, 0.02);
        }

        /* 1. LIQUID ENGINE & ALIGNMENT (V420 MASTERED) */
        html, body { height: 100vh; width: 100vw; margin: 0; padding: 0; overflow: hidden; background-color: var(--bg); color: #fff; }
        * { transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1); font-family: 'Satoshi', sans-serif; box-sizing: border-box; }

        body { 
            background-image: radial-gradient(circle at 2px 2px, rgba(0, 123, 255, 0.08) 1px, transparent 0);
            background-size: 35px 35px;
            display: flex; flex-direction: column;
        }

        /* V70 GLOBAL TICKER RESTORATION */
        .ticker-wrap { height: 35px; background: #000; border-bottom: 1px solid rgba(0, 123, 255, 0.2); overflow: hidden; flex-shrink: 0; display: flex; align-items: center; }
        .ticker-move { white-space: nowrap; animation: ticker 45s linear infinite; font-size: 9px; font-weight: 900; text-transform: uppercase; color: var(--blue); letter-spacing: 2px; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* 2. NAVIGATION & HAMBURGER (V310 RESTORED) */
        header { height: 90px; flex-shrink: 0; border-bottom: 1px solid rgba(255,255,255,0.05); background: rgba(0,0,0,0.4); backdrop-filter: blur(10px); z-index: 1000; }
        
        #side-drawer { 
            position: fixed; top: 0; left: -100%; width: 340px; height: 100%; 
            background: #0a0e14; z-index: 10000; transition: 0.5s; 
            border-right: 1px solid var(--gold); box-shadow: 20px 0 60px rgba(0,0,0,0.9);
        }
        #side-drawer.drawer-active { left: 0; }
        .drawer-item { padding: 18px 30px; border-bottom: 1px solid rgba(255,255,255,0.03); text-transform: uppercase; font-size: 11px; font-weight: 900; color: #666; display: flex; align-items: center; gap: 15px; cursor: pointer; }
        .drawer-item:hover { color: var(--gold); background: rgba(212, 175, 55, 0.05); }

        /* 3. SOVEREIGN MAINFRAME LAYOUT */
        .mainframe-wrapper {
            flex: 1; display: grid; padding: 20px; gap: 20px;
            grid-template-columns: 1.1fr 1fr 1fr;
            grid-template-rows: 1fr 1.1fr;
            grid-template-areas: 
                "gateway messenger messenger"
                "mandate visuals hitlist";
        }

        @media (max-width: 1024px) {
            .mainframe-wrapper { grid-template-columns: 1fr; grid-template-rows: auto; grid-template-areas: "gateway" "messenger" "mandate" "visuals" "hitlist"; overflow-y: auto; height: auto; padding-bottom: 120px; }
        }

        .area-gateway { grid-area: gateway; } .area-messenger { grid-area: messenger; }
        .area-mandate { grid-area: mandate; } .area-visuals { grid-area: visuals; } .area-hitlist { grid-area: hitlist; }

        .command-tile { background: var(--panel); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 40px; overflow: hidden; display: flex; flex-direction: column; height: 100%; box-shadow: 0 40px 80px rgba(0,0,0,0.8); }
        .scroller-box { flex: 1; overflow-y: auto; padding: 25px; scrollbar-width: none; }
        .scroller-box::-webkit-scrollbar { display: none; }

        /* 4. CONTENT MATRICES (V260/V415 MERGED) */
        .list-item { 
            background: var(--glass); border: 1px solid rgba(255,255,255,0.05); 
            border-radius: 20px; padding: 18px; margin-bottom: 12px; display: flex; 
            justify-content: space-between; align-items: center; cursor: pointer;
        }
        .list-item:hover {
            border-color: var(--gold); background: rgba(212, 175, 55, 0.1);
            transform: scale(1.02); box-shadow: 0 0 25px rgba(212, 175, 55, 0.15);
        }

        .matrix-2x3 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .matrix-item { aspect-ratio: 16/9; background: #000; border-radius: 20px; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); }

        /* 5. ENROLLMENT & IDENTITY (V330 TELKOM-STRUCTURED LOGIC) */
        .auth-tab { cursor: pointer; padding: 12px 20px; font-weight: 900; font-size: 10px; text-transform: uppercase; color: #555; border-bottom: 2px solid transparent; }
        .auth-tab.active { color: var(--gold); border-color: var(--gold); }
        .auth-input { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 18px; padding: 16px; width: 100%; color: white; margin-bottom: 12px; font-size: 13px; outline: none; }
        .master-btn { background: #fff; color: #000; font-weight: 900; border-radius: 50px; padding: 18px; width: 100%; text-transform: uppercase; letter-spacing: 2px; font-size: 11px; cursor: pointer; }

        /* FOOTER & SOCIALS (V310/V410 RESTORED) */
        footer { height: 80px; flex-shrink: 0; border-top: 1px solid rgba(255,255,255,0.05); background: #000; display: flex; align-items: center; justify-content: space-between; padding: 0 40px; }
        .social-link { font-size: 1.3rem; color: #444; transition: 0.4s; }
        .social-link:hover { color: var(--gold); transform: translateY(-5px); }
    </style>
</head>
<body id="mog-mainframe">

    <audio id="log-drum" src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logdrum.mp3" preload="auto"></audio>
    <audio id="mandateAudio" loop><source src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/mandatemix.mp3" type="audio/mpeg"></audio>

    <div class="ticker-wrap">
        <div class="ticker-move">
            S-01 MAINFRAME ACTIVE // REGISTRY PROTOCOL: NOIR ELEGANCE // WITBANK HQ: EMALAHLENI // DECIPHER THE CULTURE // THE SOVEREIGN TOTALITY IS LIVE...
        </div>
    </div>

    <nav id="side-drawer">
        <div class="p-10 border-b border-white/5 flex justify-between items-center">
            <img src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png" class="h-14 w-14">
            <button onclick="toggleDrawer()"><i class="fa-solid fa-xmark text-white"></i></button>
        </div>
        <div class="drawer-item" onclick="location.reload()"><i class="fa-solid fa-house"></i> National Grid Home</div>
        <div class="drawer-item"><i class="fa-solid fa-compact-disc"></i> Mandate Archive</div>
        <div class="drawer-item"><i class="fa-solid fa-id-card"></i> ID Matrix</div>
        <div class="drawer-item" onclick="toggleUI('director-console')"><i class="fa-solid fa-user-shield"></i> Director Hub</div>
    </nav>

    <header class="px-10 flex justify-between items-center">
        <div class="flex items-center gap-6">
            <button onclick="toggleDrawer()" class="text-gold text-2xl"><i class="fa-solid fa-bars-staggered"></i></button>
            <img src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/logo.png" class="h-14 w-14 rounded-full border border-gold/20">
            <div>
                <h1 class="text-2xl font-black uppercase italic tracking-tighter text-gold leading-none">Ministry of Groove</h1>
                <p class="text-[11px] text-zinc-500 font-black uppercase italic tracking-[0.2em] mt-1">Decipher the culture.</p>
            </div>
        </div>
        <button onclick="operativePulse()" class="hidden md:block text-[9px] text-blue-400 font-black uppercase tracking-[0.5em] border border-blue-400/20 px-6 py-2 rounded-full">Operative Pulse</button>
    </header>

    <main class="mainframe-wrapper">
        
        <section class="command-tile area-gateway p-10 bg-gradient-to-b from-blue-500/5 to-transparent">
            <div id="auth-tabs" class="flex gap-6 mb-10 border-b border-white/5 pb-2">
                <span onclick="switchTab('login')" id="tab-login" class="auth-tab active">Log In</span>
                <span onclick="switchTab('signup')" id="tab-signup" class="auth-tab">Enrollment</span>
            </div>
            
            <div id="login-fields">
                <input id="l-user" type="text" placeholder="GMAIL / ALIAS" class="auth-input">
                <input id="l-pass" type="password" placeholder="PASSCODE" class="auth-input">
                <button onclick="handleAuth()" class="master-btn mt-4">Authorize Entry</button>
            </div>

            <div id="signup-fields" class="hidden">
                <input id="r-alias" type="text" placeholder="CHOOSE ALIAS" class="auth-input">
                <input id="r-email" type="email" placeholder="YOUR GMAIL" class="auth-input">
                <input id="r-pass" type="password" placeholder="CREATE PASSCODE" class="auth-input">
                <button onclick="handleSignup()" class="master-btn bg-gold text-black mt-4">Submit Enrollment</button>
            </div>

            <div id="active-op-badge" class="hidden text-center h-full flex flex-col justify-center items-center">
                <div id="qrcode" class="bg-white p-2 rounded-xl mb-6"></div>
                <h2 id="display-op-id" class="text-4xl text-white font-black uppercase italic tracking-tighter">OPERATIVE</h2>
                <button onclick="logout()" class="text-[10px] text-red-500 font-black mt-8">Terminate Session</button>
            </div>
        </section>

        <section class="command-tile area-messenger">
            <div class="flex-grow flex flex-col bg-[#0b141a] m-1 rounded-[30px] overflow-hidden">
                <div id="chat-stream" class="scroller-box p-8"></div>
                <div class="bg-[#202c33] p-5 flex gap-4">
                    <input id="chat-msg" type="text" placeholder="Encode Frequency..." class="flex-grow bg-[#2a3942] border-0 rounded-full px-8 py-4 text-sm text-white outline-none">
                    <button onclick="sendMessage()" class="w-14 h-14 bg-blue-500 text-black rounded-full flex items-center justify-center"><i class="fa-solid fa-paper-plane"></i></button>
                </div>
            </div>
        </section>

        <section class="command-tile area-mandate">
            <p class="p-6 border-b border-white/5 text-[10px] text-gold font-black uppercase italic bg-black/20">Official Mandate</p>
            <div class="scroller-box">
                <div class="mb-10 border-l-2 border-gold pl-6">
                    <p class="text-gold text-[10px] font-black uppercase mb-2">Objective</p>
                    <p class="text-sm text-zinc-400">Custodians of sound and social architecture in Mpumalanga.</p>
                </div>
                <div class="mb-10 border-l-2 border-gold pl-6">
                    <p class="text-gold text-[10px] font-black uppercase mb-2">Sonic Standard</p>
                    <p class="text-sm text-zinc-400">Preserving the Art of Deep Tech Noir and Ancestral Soul.</p>
                </div>
            </div>
        </section>
        
        <section class="command-tile area-mandate">
            <p class="p-6 border-b border-white/5 text-[10px] text-gold font-black uppercase italic bg-black/20">Official Mandate</p>
            <div class="scroller-box">
                <div class="mb-10 border-l-2 border-gold pl-6">
                    <p class="text-gold text-[10px] font-black uppercase mb-2">Objective</p>
                    <p class="text-sm text-zinc-400">Custodians of sound and social architecture in Mpumalanga.</p>
                </div>
                <div class="mb-10 border-l-2 border-gold pl-6">
                    <p class="text-gold text-[10px] font-black uppercase mb-2">Sonic Standard</p>
                    <p class="text-sm text-zinc-400">Preserving the Art of Deep Tech Noir and Ancestral Soul.</p>
                </div>
            </div>
        </section>

        <section class="command-tile area-visuals">
            <p class="p-6 border-b border-white/5 text-[10px] text-white font-black uppercase italic bg-black/20">Visual Archive</p>
            <div class="scroller-box">
                <div class="matrix-2x3" id="v-matrix"></div>
            </div>
        </section>

        <section class="command-tile area-hitlist">
            <p class="p-6 border-b border-white/5 text-[10px] text-white font-black uppercase italic bg-black/20">Top 10 Hitlist</p>
            <div id="hit-list" class="scroller-box"></div>
        </section>

    </main>

    <footer>
        <p class="text-[9px] text-zinc-700 font-black uppercase tracking-[0.5em]">Â© 2026 MINISTRY OF GROOVE // SOVEREIGN COMMAND</p>
        <div class="flex gap-10">
            <a href="https://tiktok.com/@directormog" target="_blank" class="social-link"><i class="fa-brands fa-tiktok"></i></a>
            <a href="https://instagram.com" target="_blank" class="social-link"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://wa.me/27791438964" target="_blank" class="social-link"><i class="fa-brands fa-whatsapp"></i></a>
            <a href="https://youtube.com" target="_blank" class="social-link"><i class="fa-brands fa-youtube"></i></a>
        </div>
    </footer>

    <script>
        const MOG_CFG = {
            U: "https://vbkpatwvgvwarybbpiky.supabase.co",
            K: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZia3BhdHd2Z3Z3YXJpYmJwaWt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExMjc0MTksImV4cCI6MjA4NjcwMzQxOX0.v3iWw2z9vL-X6pGjY0W_S5m1z0S8uI1L8yN7fL0M_Y8"
        };
        const db = window.supabase.createClient(MOG_CFG.U, MOG_CFG.K);
        let currentOp = null;

        function toggleDrawer() { document.getElementById('side-drawer').classList.toggle('drawer-active'); }
        function switchTab(t) {
            document.getElementById('login-fields').classList.toggle('hidden', t !== 'login');
            document.getElementById('signup-fields').classList.toggle('hidden', t !== 'signup');
            document.getElementById('tab-login').classList.toggle('active', t === 'login');
            document.getElementById('tab-signup').classList.toggle('active', t === 'signup');
        }

        async function handleAuth() {
            const { data, error } = await db.auth.signInWithPassword({ email: document.getElementById('l-user').value, password: document.getElementById('l-pass').value });
            if(!error) {
                currentOp = data.user;
                document.getElementById('auth-tabs').classList.add('hidden');
                document.getElementById('login-fields').classList.add('hidden');
                document.getElementById('active-op-badge').classList.remove('hidden');
                new QRCode(document.getElementById("qrcode"), { text: "MOG-DELEGATE-"+currentOp.id, width: 120, height: 120 });
            } else alert(error.message);
        }

        async function operativePulse() {
            document.body.style.opacity = '0.5';
            document.getElementById('log-drum').play();
            setTimeout(() => document.body.style.opacity = '1', 300);
        }

        window.onload = () => {
            const vm = document.getElementById('v-matrix');
            const hl = document.getElementById('hit-list');
            for(let i=1; i<=6; i++) {
                vm.innerHTML += `
                    <div class="matrix-item" onclick="window.open('https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/clip${i}.mp4')">
                        <video muted loop onmouseover="this.play()" onmouseout="this.pause()" src="https://raw.githubusercontent.com/directormog-coder/Ministry-of-Groove/main/clip${i}.mp4" class="w-full h-full object-cover opacity-60"></video>
                    </div>`;
            }
            for(let i=1; i<=10; i++) hl.innerHTML += `<div class="list-item"><p class="text-[10px] text-white font-black">#${i} FREQUENCY BOOST</p><i class="fa-brands fa-spotify text-green-500"></i></div>`;
        };
    </script>
</body>
</html>
